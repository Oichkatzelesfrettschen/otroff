#!/usr/bin/env sh
# gitconfigure -- set up repository-specific Git configuration
#
# The script registers the stripnul filter which cleans trailing NUL
# bytes from files. Run this after cloning the repository to enable the
# filter for all source files.

set -e

# Register the filter's clean and smudge commands.
# Use an absolute path so Git always finds the script.
git config filter.stripnul.clean "\"$(pwd)/tools/git-strip-nul.sh\""
# Quote the smudge command as well for consistency.
git config filter.stripnul.smudge "\"cat\""
